#pragma once

#include "mmio.bfm"

@leaf(putchar,
  @mmio_write(@arg1, #HDR_TTY_OUT)
)

@proc(puts,
  @mov(x0, @arg2)
  @mov(x1, @arg1)

  @peek(sc, x1, x0)

  @while(@ne(sc, r0),
    @call1(putchar, @reg, sc)
    @inc(x0)
    @peek(sc, x1, x0)
  )

  @call1(putchar, @imm, 10)
  @set(sc, 0)
  @retval(sc, r0)
)
