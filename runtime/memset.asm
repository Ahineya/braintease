; Generated by Ripple C99 Compiler (rcc)

memset:
; === Function Prologue ===
; Initialize SB as stack bank (1)
    LI SB, 1
; Save RA at SP
    STORE RA, SB, SP
    ADDI SP, SP, 1
; Save old FP
    STORE FP, SB, SP
    ADDI SP, SP, 1
; Save callee-saved registers S0-S3
    STORE S0, SB, SP
    ADDI SP, SP, 1
    STORE S1, SB, SP
    ADDI SP, SP, 1
    STORE S2, SB, SP
    ADDI SP, SP, 1
    STORE S3, SB, SP
    ADDI SP, SP, 1
; Set FP = SP
    ADD FP, SP, R0
; Allocate 9 slots for locals
    ADDI SP, SP, 9
    ADDI SP, SP, -1
    MOVE S3, SP
    LI S2, 0
    STORE S2, SB, S3
    BEQ R0, R0, L_memset_1
; Unconditional branch to L_memset_1
L_memset_1:
    LOAD S1, SB, S3
    SLT S1, S1, S0
    BEQ S1, R0, L_memset_4
; Branch to L_memset_4 if condition is false
    BEQ R0, R0, L_memset_2
; Unconditional branch to L_memset_2 (condition was true)
L_memset_2:
    LOAD T7, SB, S3
    ADD T4, T7, R0
    ADD T5, T6, T4
; Runtime bank overflow calculation for dynamic GEP
    LI T2, 4096
    DIV T3, T5, T2
    MOD T1, T5, T2
    ADD T0, SB, T3
    ADD T5, T1, R0
    STORE S2, SB, T5
    BEQ R0, R0, L_memset_3
; Unconditional branch to L_memset_3
L_memset_3:
    LOAD S0, SB, S3
    LI S1, 1
    ADD S0, S0, S1
    STORE S0, SB, S3
    BEQ R0, R0, L_memset_1
; Unconditional branch to L_memset_1
L_memset_4:
; Jump to epilogue
    BEQ R0, R0, L_memset_99999
L_memset_99999:
; === Function Epilogue ===
; Restore SP = FP
    ADD SP, FP, R0
; Restore callee-saved registers S3-S0
    ADDI SC, FP, -1
    LOAD S3, SB, SC
    ADDI SC, FP, -2
    LOAD S2, SB, SC
    ADDI SC, FP, -3
    LOAD S1, SB, SC
    ADDI SC, FP, -4
    LOAD S0, SB, SC
; Restore old FP
    ADDI SP, SP, -5
    LOAD FP, SB, SP
; Restore RA
    ADDI SP, SP, -1
    LOAD RA, SB, SP
; Return to caller
    ADD PCB, RAB, R0
    JALR R0, R0, RA
