; Generated by Ripple C99 Compiler (rcc)

; Program entry point
_start:
    ; Initialize stack pointer
    LI R13, 0       ; Stack bank = 0
    LI R14, 1000   ; Stack pointer starts at 1000
    LI R15, 1000   ; Frame pointer starts at 1000
    CALL main
    HALT

; Function: puts
puts:
    STORE RA, R13, R14
    ADDI R14, R14, 1
    STORE R15, R13, R14
    ADDI R14, R14, 1
    ADD R15, R14, R0
; GetElementPtr t1 = t0 + offsets
;   Base t0 in R3
    LI R4, 0
    ADD R5, R3, R4
; Load from [t1] to t2
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
; GetElementPtr t3 = t0 + offsets
;   Base t0 in R3
    LI R4, 1
    ADD R5, R3, R4
; Load from [t3] to t4
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
; GetElementPtr t5 = t0 + offsets
;   Base t0 in R3
    LI R4, 2
    ADD R5, R3, R4
; Load from [t5] to t6
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
    LI R4, 10
    STORE R4, R0, R0
    LI R4, 3
    ADD R3, R4, R0
    ADD R14, R15, R0
    ADDI R14, R14, -1
    LOAD R15, R13, R14
    ADDI R14, R14, -1
    LOAD RA, R13, R14
    RET
; Function: main
main:
    STORE RA, R13, R14
    ADDI R14, R14, 1
    STORE R15, R13, R14
    ADDI R14, R14, 1
    ADD R15, R14, R0
L1:
; Alloca for t0 at FP+1
    ADDI R5, R15, 1
; GetElementPtr t1 = t0 + offsets
    ADDI R6, R15, 1
;   Base t0 in R6
    LI R3, 0
    ADD R7, R6, R3
    LI R4, 65
; Store 65 to [t1]
    STORE R4, R13, R7
; GetElementPtr t2 = t0 + offsets
    ADDI R5, R15, 1
;   Base t0 in R5
    LI R3, 1
    ADD R6, R5, R3
    LI R4, 66
; Store 66 to [t2]
    STORE R4, R13, R6
; GetElementPtr t3 = t0 + offsets
    ADDI R5, R15, 1
;   Base t0 in R5
    LI R3, 2
    ADD R6, R5, R3
    LI R4, 67
; Store 67 to [t3]
    STORE R4, R13, R6
; GetElementPtr t4 = t0 + offsets
    ADDI R5, R15, 1
;   Base t0 in R5
    LI R3, 3
    ADD R6, R5, R3
    LI R4, 0
; Store 0 to [t4]
    STORE R4, R13, R6
    ADDI R5, R15, 1
    ADD R3, R5, R0
    CALL puts
    ADD R6, R3, R0
    LI R3, 0
    ADD R14, R15, R0
    ADDI R14, R14, -1
    LOAD R15, R13, R14
    ADDI R14, R14, -1
    LOAD RA, R13, R14
    RET
