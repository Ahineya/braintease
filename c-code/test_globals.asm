; Generated by Ripple C99 Compiler (rcc)

; Program entry point
_start:
    ; Initialize stack pointer
    LI R13, 0       ; Stack bank = 0
    LI R14, 1000   ; Stack pointer starts at 1000
    LI R15, 1000   ; Frame pointer starts at 1000
    ; Initialize globals
    CALL _init_globals
    CALL main
    HALT

_init_globals:
; Global variable: global_x at address 100
    LI R3, 42
    LI R4, 100
    STORE R3, R0, R4
; Global variable: global_y at address 101
    LI R3, 100
    LI R4, 101
    STORE R3, R0, R4
; Global variable: global_uninitialized at address 102
    RET
; Function: main
main:
    STORE RA, R13, R14
    ADDI R14, R14, 1
    STORE R15, R13, R14
    ADDI R14, R14, 1
    ADD R15, R14, R0
; Load from [@global_x] to t0
    LI R6, 100
    LOAD R5, R0, R6
    STORE R5, R0, R0
; Store 65 to @global_x
    LI R3, 65
    LI R5, 100
    STORE R3, R0, R5
; Load from [@global_x] to t1
    LI R6, 100
    LOAD R5, R0, R6
    STORE R5, R0, R0
; Store 10 to @global_uninitialized
    LI R3, 10
    LI R5, 102
    STORE R3, R0, R5
; Load from [@global_uninitialized] to t2
    LI R6, 102
    LOAD R5, R0, R6
    STORE R5, R0, R0
    LI R3, 0
    ADD R14, R15, R0
    ADDI R14, R14, -1
    LOAD R15, R13, R14
    ADDI R14, R14, -1
    LOAD RA, R13, R14
    RET
