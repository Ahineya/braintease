; Generated by Ripple C99 Compiler (rcc)

; Program entry point
_start:
    ; Initialize stack pointer
    LI R13, 0       ; Stack bank = 0
    LI R14, 1000   ; Stack pointer starts at 1000
    LI R15, 1000   ; Frame pointer starts at 1000
    ; Initialize globals
    CALL _init_globals
    CALL main
    HALT

_init_globals:
; String literal XYZ at address 100
    LI R3, 88
    LI R4, 100
    STORE R3, R0, R4
    LI R3, 89
    LI R4, 101
    STORE R3, R0, R4
    LI R3, 90
    LI R4, 102
    STORE R3, R0, R4
    LI R3, 0
    LI R4, 103
    STORE R3, R0, R4
    RET
; Function: puts
puts:
    STORE RA, R13, R14
    ADDI R14, R14, 1
    STORE R15, R13, R14
    ADDI R14, R14, 1
    ADD R15, R14, R0
; GetElementPtr t1 = t0 + offsets
;   Base t0 in R3
    LI R4, 0
    ADD R5, R3, R4
; Load from [t1] to t2
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
; GetElementPtr t3 = t0 + offsets
;   Base t0 in R3
    LI R4, 1
    ADD R5, R3, R4
; Load from [t3] to t4
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
; GetElementPtr t5 = t0 + offsets
;   Base t0 in R3
    LI R4, 2
    ADD R5, R3, R4
; Load from [t5] to t6
; WARNING: Assuming unknown pointer points to global memory
    LOAD R6, R0, R5
    STORE R6, R0, R0
    LI R4, 10
    STORE R4, R0, R0
    LI R4, 3
    ADD R3, R4, R0
    ADD R14, R15, R0
    ADDI R14, R14, -1
    LOAD R15, R13, R14
    ADDI R14, R14, -1
    LOAD RA, R13, R14
    RET
; Function: main
main:
    STORE RA, R13, R14
    ADDI R14, R14, 1
    STORE R15, R13, R14
    ADDI R14, R14, 1
    ADD R15, R14, R0
L1:
    LI R5, 100
    ADD R3, R5, R0
    CALL puts
    ADD R6, R3, R0
    LI R3, 0
    ADD R14, R15, R0
    ADDI R14, R14, -1
    LOAD R15, R13, R14
    ADDI R14, R14, -1
    LOAD RA, R13, R14
    RET
